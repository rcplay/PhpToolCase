<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>PhpToolCase: Event Dispatcher Component (PtcEvent)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="toolcaseedited.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">PhpToolCase
   </div>
   <div id="projectbrief">Api Documentation Version 0.9.2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>User&#160;Guides</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('event_dispatcher.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Event Dispatcher Component (<a class="el" href="class_ptc_event.html">PtcEvent</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#introduction">Introduction</a></li>
<li class="level1"><a href="#getting_started">Getting Started</a></li>
<li class="level1"><a href="#adding_events">Adding Event Listeners</a><ul><li class="level2"><a href="#basic_usage">Adding Closures as Listeners</a></li>
<li class="level2"><a href="#adding_functions">Adding Declared Functions As Listeners</a></li>
<li class="level2"><a href="#using_classes">Adding Classes As Listeners</a></li>
<li class="level2"><a href="#using_wildcards">Using Wildcards</a></li>
<li class="level2"><a href="#using_priority">Assigning Priority</a></li>
</ul>
</li>
<li class="level1"><a href="#firing_events">Firing Events</a></li>
<li class="level1"><a href="#prevent_propagation">Preventing Event Propagation</a></li>
<li class="level1"><a href="#getting_events">Retrieving Previously Added Events</a></li>
<li class="level1"><a href="#removing_events">Removing Event Listeners</a></li>
<li class="level1"><a href="#register_component">Using The Library Helpers</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="introduction"></a>
Introduction</h1>
<p>The <a class="el" href="class_ptc_event.html">PtcEvent</a> component provides an observer implementation for your application, allowing the programmer to add and listen for events. Event execution order can be controlled with a priority parameter. The class can add closures and class methods as event listeners. Wildcards are also accepted to watch event listeners execution. There are also helper functions available for this class, shipped with the <a class="el" href="ptc-helpers_8php.html">ptc-helpers.php</a> file. The class also supports event removal if needed. Event Propagation can also be prevented. <br/>
<br/>
 Main Features: </p>
<ul>
<li>
Accepts closures and class methods as event listener </li>
<li>
Supports wildcards for all added events </li>
<li>
Helper functions can be added with the <a class="el" href="ptc-helpers_8php.html">ptc-helpers.php</a> file </li>
<li>
Supports event execution order with the priority parameter </li>
<li>
Supports Event removal if needed </li>
<li>
Can Retrieve a list of added events </li>
<li>
Supports event propagation prevention </li>
</ul>
<p><br/>
 </p>
<hr/>
 <h1><a class="anchor" id="getting_started"></a>
Getting Started</h1>
<p>To start using the event dispatcher, simply include the class file, and start adding event listeners. Here's a quick and simple example: </p>
<div class="fragment"><div class="line">require_once( <span class="stringliteral">&#39;PtcEvent.php&#39;</span> );</div>
<div class="line"></div>
<div class="line"><span class="comment">// add an event listener with a closure as callback</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.submit&#39;</span> , <span class="keyword">function</span>( $data )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// do some stuff</span></div>
<div class="line">  print <span class="stringliteral">&quot;called event with closure as callback!&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">} );</div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 <h1><a class="anchor" id="adding_events"></a>
Adding Event Listeners</h1>
<p>To add event listeners, the method <a class="el" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1" title="Adds a listener to an event. ">PtcEvent::listen( )</a> can be used. The following paragraphs will demostrate how event listeners can be added to your application. </p>
<h2><a class="anchor" id="basic_usage"></a>
Adding Closures as Listeners</h2>
<p>The fastest way to add an event listener is using closures, have a look at the following example: </p>
<div class="fragment"><div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.submit&#39;</span> , <span class="keyword">function</span>( $data )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// do some stuff</span></div>
<div class="line">  print <span class="stringliteral">&quot;called event with closure as callback!&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">} );</div>
</div><!-- fragment --> <h2><a class="anchor" id="adding_functions"></a>
Adding Declared Functions As Listeners</h2>
<p>Declared functions can also be added as listeners: </p>
<div class="fragment"><div class="line">  <span class="comment">// adding a function as callback</span></div>
<div class="line"><span class="keyword">function</span> event_callback( $data )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// do some stuff</span></div>
<div class="line">  print <span class="stringliteral">&quot;event_callback( ) function called!&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.error&#39;</span> , <span class="stringliteral">&#39;event_callback&#39;</span> ); </div>
</div><!-- fragment --> <h2><a class="anchor" id="using_classes"></a>
Adding Classes As Listeners</h2>
<p>Classes can also be added as event listeners, as shown in the next example: </p>
<div class="fragment"><div class="line"><span class="comment">// registering classes as listeners</span></div>
<div class="line"><span class="keyword">class </span>MyObserver </div>
<div class="line">{</div>
<div class="line">  <span class="keyword">public</span> <span class="keyword">function</span> handle( $data )</div>
<div class="line">  {</div>
<div class="line">      <span class="comment">// default method that will be called</span></div>
<div class="line">      <span class="comment">// do some stuff</span></div>
<div class="line">      print <span class="stringliteral">&quot;default handle( ) method called&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// registering the class as event listener</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.success&#39;</span> , <span class="stringliteral">&#39;MyObserver&#39;</span> );</div>
</div><!-- fragment --><p> By default, the <a class="el" href="class_ptc_mapper.html">PtcMapper</a> tries to call the method <code>handle( )</code> from a class, to add a custom method use the <code>"@"</code> operator: </p>
<div class="fragment"><div class="line"><span class="keyword">class </span>MyObserver </div>
<div class="line">{ </div>
<div class="line">  <span class="keyword">public</span> <span class="keyword">function</span> myMethod( $data )</div>
<div class="line">  {</div>
<div class="line">      <span class="comment">// do some stuff</span></div>
<div class="line">      print <span class="stringliteral">&quot;custom method has been called&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">  }   </div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// registering the class with a custom method</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.error&#39;</span> , <span class="stringliteral">&#39;MyObserver@myMethod&#39;</span> );</div>
</div><!-- fragment --> <h2><a class="anchor" id="using_wildcards"></a>
Using Wildcards</h2>
<p>Wildcards <code>"*"</code> are also accepted for the <code>"$event"</code> argument: </p>
<div class="fragment"><div class="line"><span class="comment">// using wildcards , event name is passed as argument</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.*&#39;</span> , <span class="keyword">function</span>( $data , $event )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// do some stuff</span></div>
<div class="line">  print <span class="stringliteral">&quot;wildcard called on event &quot;</span> . $event . <span class="stringliteral">&#39;:&lt;pre&gt;&#39;</span>;</div>
<div class="line">  print print_r( $data , <span class="keyword">true</span> ) . <span class="stringliteral">&quot;&lt;/pre&gt;&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">} );</div>
</div><!-- fragment --><p> This listener will be called every time an event with the prefix <code>"form"</code> is called. </p>
<h2><a class="anchor" id="using_priority"></a>
Assigning Priority</h2>
<p>The argument <code>"$priority"</code> can be used to control the events execution order: </p>
<div class="fragment"><div class="line"><span class="comment">// higher priority numbers will execute first</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.error&#39;</span> , <span class="stringliteral">&#39;event_callback&#39;</span> , 10 ); </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 <h1><a class="anchor" id="firing_events"></a>
Firing Events</h1>
<p>To fire events, the method <a class="el" href="class_ptc_event.html#a8bb57c7093d1ee0d7e208fc3548747c9" title="Fires an event. ">PtcEvent::fire( )</a> can be used: </p>
<div class="fragment"><div class="line"><span class="comment">// firing an event</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a8bb57c7093d1ee0d7e208fc3548747c9">PtcEvent::fire</a>( <span class="stringliteral">&#39;form.submit&#39;</span> , array( <span class="stringliteral">&#39;form data&#39;</span> ) );</div>
</div><!-- fragment --><p> To be able to manipulate data with the event listeners, the <code>"&amp;"</code> can be used to reference the <code>"$data"</code> argument: </p>
<div class="fragment"><div class="line">$data = <span class="stringliteral">&#39;some data&#39;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">// adding &quot;&amp;&quot; to reference and manipulate the data with the listeners</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a8bb57c7093d1ee0d7e208fc3548747c9">PtcEvent::fire</a>( <span class="stringliteral">&#39;ptc.query&#39;</span> , array( &amp;$data ) ); </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 <h1><a class="anchor" id="prevent_propagation"></a>
Preventing Event Propagation</h1>
<p>To prevent propagation, you can retun <code>"false"</code> inside an event listener, and all events following that event will not be fired: </p>
<div class="fragment"><div class="line"><span class="comment">// return false to prevent event propagation</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#a0c49b7c1c81ef6da3276ab28592db0d1">PtcEvent::listen</a>( <span class="stringliteral">&#39;form.error&#39;</span> , <span class="keyword">function</span>( $data )</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// do some stuff</span></div>
<div class="line">  print <span class="stringliteral">&quot;event propagation has been stopped!&lt;br&gt;&lt;br&gt;&quot;</span>;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// preventing event propagation</span></div>
<div class="line">} );</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Use <code>"$priority"</code> argument to control execution order, refer to <a class="el" href="event_dispatcher.html#using_priority">Assigning Priority</a> to know more over this topic.Preventing Events Propagation</dd></dl>
<hr/>
 <h1><a class="anchor" id="getting_events"></a>
Retrieving Previously Added Events</h1>
<p>To retrieve previously added events, use the method <a class="el" href="class_ptc_event.html">PtcEvent</a>:getEvents( ); </p>
<div class="fragment"><div class="line"><span class="comment">// getting the current event listeners</span></div>
<div class="line">print_r( <a class="code" href="class_ptc_event.html#a77f2d96640845cc2495c6e02d12fabaa">PtcEvent::getEvents</a>( <span class="stringliteral">&#39;form.error&#39;</span> ) );</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>If the argument <code>"$name"</code> is not used, all currently added events will be returned.</dd></dl>
<hr/>
 <h1><a class="anchor" id="removing_events"></a>
Removing Event Listeners</h1>
<p>To remove event listeners the method <a class="el" href="class_ptc_event.html#af217a2411293a66993ffd2d8e43f93ac" title="Removes previously added event listeners. ">PtcEvent::remove( )</a> can be used: </p>
<div class="fragment"><div class="line"><span class="comment">// removing the last added event</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#af217a2411293a66993ffd2d8e43f93ac">PtcEvent::remove</a>( <span class="stringliteral">&#39;form.error&#39;</span> );</div>
<div class="line"></div>
<div class="line"><span class="comment">// removing the first event by key</span></div>
<div class="line"><a class="code" href="class_ptc_event.html#af217a2411293a66993ffd2d8e43f93ac">PtcEvent::remove</a>( <span class="stringliteral">&#39;form.error&#39;</span> , 0 ); </div>
</div><!-- fragment --><p> <br/>
 </p>
<hr/>
 <h1><a class="anchor" id="register_component"></a>
Using The Library Helpers</h1>
<p>The <code>PhpToolCase</code> library, provides helper functions for the <a class="el" href="class_ptc_event.html">PtcEvent</a> component. To be able to use the class with the <a class="el" href="ptc-helpers_8php.html">ptc-helpers.php</a> functions, the component needs to be registered. Use the method <a class="el" href="class_ptc_event.html#a610b9c89b82e11ea426e1804874a6ef4" title="Registers the component with a constant for ptc helpers functions. ">PtcEvent::register( )</a> before calling any of the helper functions related with the <a class="el" href="class_ptc_event.html">PtcEvent</a> component </p>
<dl class="section note"><dt>Note</dt><dd>The <a class="el" href="class_ptc_handy_man.html">PtcHandyMan</a> component automatically registers the <a class="el" href="class_ptc_event.html">PtcEvent</a> class when the method <a class="el" href="class_ptc_handy_man.html#aa33dd5de7586b98bf750bdc448f8bd1e" title="Registers the autoloader to load classes when needed. ">PtcHandyMan::register( )</a> is called.</dd></dl>
<p><br/>
 </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
 <!-- start footer part -->
	<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
		<ul>
			<li class="navelem"><a class="el" href="index.html">User Guides</a></li>
			<li class="footer">Generated on Sat Dec 7 2013 00:01:11 for PhpToolCase by
				<a href="http://www.doxygen.org/index.html">
				<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 
			</li>
		</ul>
	</div>
	<!-- Start of StatCounter Code for Default Guide -->
	<script type="text/javascript">
	var sc_project=7779914; 
	var sc_invisible=1; 
	var sc_security="4a86be8b"; 
	</script>
	<script type="text/javascript"
	src="http://www.statcounter.com/counter/counter.js"></script>
	<noscript><div class="statcounter"><a title="tumblr page
	counter" href="http://statcounter.com/tumblr/"
	target="_blank"><img class="statcounter"
	src="http://c.statcounter.com/7779914/0/4a86be8b/1/"
	alt="tumblr page counter"></a></div></noscript>
	<!-- End of StatCounter Code for Default Guide -->
</body>
</html>